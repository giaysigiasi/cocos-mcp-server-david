"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.testSceneTools = testSceneTools;
exports.testAssetTools = testAssetTools;
exports.testProjectTools = testProjectTools;
exports.runAllTests = runAllTests;
/**
 * Manual test script
 * Can be executed in Cocos Creator console for testing
 */
async function testSceneTools() {
    console.log('=== Testing Scene Tools ===');
    try {
        // 1. Get scene info
        console.log('1. Getting scene info...');
        const sceneInfo = await Editor.Message.request('scene', 'get-scene-info');
        console.log('Scene info:', sceneInfo);
        // 2. Create node
        console.log('\n2. Creating test node...');
        const createResult = await Editor.Message.request('scene', 'create-node', {
            name: 'TestNode_' + Date.now(),
            type: 'cc.Node'
        });
        console.log('Create result:', createResult);
        if (createResult && createResult.uuid) {
            const nodeUuid = createResult.uuid;
            // 3. Query node
            console.log('\n3. Querying node...');
            const nodeInfo = await Editor.Message.request('scene', 'query-node', {
                uuid: nodeUuid
            });
            console.log('Node info:', nodeInfo);
            // 4. Set node property
            console.log('\n4. Setting node position...');
            await Editor.Message.request('scene', 'set-node-property', {
                uuid: nodeUuid,
                path: 'position',
                value: { x: 100, y: 200, z: 0 }
            });
            console.log('Position set successfully');
            // 5. Add component
            console.log('\n5. Adding Sprite component...');
            const addCompResult = await Editor.Message.request('scene', 'add-component', {
                uuid: nodeUuid,
                component: 'cc.Sprite'
            });
            console.log('Component added:', addCompResult);
            // 6. Query component
            console.log('\n6. Querying component...');
            const compInfo = await Editor.Message.request('scene', 'query-node-component', {
                uuid: nodeUuid,
                component: 'cc.Sprite'
            });
            console.log('Component info:', compInfo);
            // 7. Remove node
            console.log('\n7. Removing test node...');
            await Editor.Message.request('scene', 'remove-node', {
                uuid: nodeUuid
            });
            console.log('Node removed successfully');
        }
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
async function testAssetTools() {
    console.log('\n=== Testing Asset Tools ===');
    try {
        // 1. Query assets
        console.log('1. Querying image assets...');
        const assets = await Editor.Message.request('asset-db', 'query-assets', {
            pattern: '**/*.png',
            ccType: 'cc.ImageAsset'
        });
        console.log('Found assets:', (assets === null || assets === void 0 ? void 0 : assets.length) || 0);
        // 2. Get asset info
        console.log('\n2. Getting asset database info...');
        const assetInfo = await Editor.Message.request('asset-db', 'query-asset-info', {
            uuid: 'db://assets'
        });
        console.log('Asset info:', assetInfo);
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
async function testProjectTools() {
    console.log('\n=== Testing Project Tools ===');
    try {
        // 1. Get project info
        console.log('1. Getting project info...');
        const projectInfo = await Editor.Message.request('project', 'query-info');
        console.log('Project info:', projectInfo);
        // 2. Check build capability
        console.log('\n2. Checking build capability...');
        const canBuild = await Editor.Message.request('project', 'can-build');
        console.log('Can build:', canBuild);
    }
    catch (error) {
        console.error('Test failed:', error);
    }
}
async function runAllTests() {
    console.log('Starting MCP Server Tools Test...\n');
    await testSceneTools();
    await testAssetTools();
    await testProjectTools();
    console.log('\n=== All tests completed ===');
}
// Export to global scope for easy console access
global.MCPTest = {
    testSceneTools,
    testAssetTools,
    testProjectTools,
    runAllTests
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFudWFsLXRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zb3VyY2UvdGVzdC9tYW51YWwtdGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9BLHdDQStEQztBQUVELHdDQXNCQztBQUVELDRDQWlCQztBQUVELGtDQVFDO0FBekhEOzs7R0FHRztBQUVJLEtBQUssVUFBVSxjQUFjO0lBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQztJQUUzQyxJQUFJLENBQUM7UUFDRCxvQkFBb0I7UUFDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sU0FBUyxHQUFHLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDMUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFdEMsaUJBQWlCO1FBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLENBQUMsQ0FBQztRQUMxQyxNQUFNLFlBQVksR0FBRyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUU7WUFDdEUsSUFBSSxFQUFFLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQzlCLElBQUksRUFBRSxTQUFTO1NBQ2xCLENBQUMsQ0FBQztRQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFNUMsSUFBSSxZQUFZLElBQUksWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3BDLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUM7WUFFbkMsZ0JBQWdCO1lBQ2hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUNyQyxNQUFNLFFBQVEsR0FBRyxNQUFNLE1BQU0sQ0FBQyxP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LE1BQWMsQ0FBQyxPQUFPLEdBQUc7SUFDdEIsY0FBYztJQUNkLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEIsV0FBVztDQUNkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJkZWNsYXJlIGNvbnN0IEVkaXRvcjogYW55O1xyXG5cclxuLyoqXHJcbiAqIE1hbnVhbCB0ZXN0IHNjcmlwdFxyXG4gKiBDYW4gYmUgZXhlY3V0ZWQgaW4gQ29jb3MgQ3JlYXRvciBjb25zb2xlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RTY2VuZVRvb2xzKCkge1xyXG4gICAgY29uc29sZS5sb2coJz09PSBUZXN0aW5nIFNjZW5lIFRvb2xzID09PScpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIDEuIEdldCBzY2VuZSBpbmZvXHJcbiAgICAgICAgY29uc29sZS5sb2coJzEuIEdldHRpbmcgc2NlbmUgaW5mby4uLicpO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5mbyA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ2dldC1zY2VuZS1pbmZvJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NjZW5lIGluZm86Jywgc2NlbmVJbmZvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyAyLiBDcmVhdGUgbm9kZVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdcXG4yLiBDcmVhdGluZyB0ZXN0IG5vZGUuLi4nKTtcclxuICAgICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdjcmVhdGUtbm9kZScsIHtcclxuICAgICAgICAgICAgbmFtZTogJ1Rlc3ROb2RlXycgKyBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICB0eXBlOiAnY2MuTm9kZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRlIHJlc3VsdDonLCBjcmVhdGVSZXN1bHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjcmVhdGVSZXN1bHQgJiYgY3JlYXRlUmVzdWx0LnV1aWQpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZVV1aWQgPSBjcmVhdGVSZXN1bHQudXVpZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDMuIFF1ZXJ5IG5vZGVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1xcbjMuIFF1ZXJ5aW5nIG5vZGUuLi4nKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZUluZm8gPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdxdWVyeS1ub2RlJywge1xyXG4gICAgICAgICAgICAgICAgdXVpZDogbm9kZVV1aWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb2RlIGluZm86Jywgbm9kZUluZm8pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gNC4gU2V0IG5vZGUgcHJvcGVydHlcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1xcbjQuIFNldHRpbmcgbm9kZSBwb3NpdGlvbi4uLicpO1xyXG4gICAgICAgICAgICBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdzY2VuZScsICdzZXQtbm9kZS1wcm9wZXJ0eScsIHtcclxuICAgICAgICAgICAgICAgIHV1aWQ6IG5vZGVVdWlkLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogJ3Bvc2l0aW9uJyxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB7IHg6IDEwMCwgeTogMjAwLCB6OiAwIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3NpdGlvbiBzZXQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA1LiBBZGQgY29tcG9uZW50XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcXG41LiBBZGRpbmcgU3ByaXRlIGNvbXBvbmVudC4uLicpO1xyXG4gICAgICAgICAgICBjb25zdCBhZGRDb21wUmVzdWx0ID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAnYWRkLWNvbXBvbmVudCcsIHtcclxuICAgICAgICAgICAgICAgIHV1aWQ6IG5vZGVVdWlkLFxyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnY2MuU3ByaXRlJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCBhZGRlZDonLCBhZGRDb21wUmVzdWx0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIDYuIFF1ZXJ5IGNvbXBvbmVudFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNi4gUXVlcnlpbmcgY29tcG9uZW50Li4uJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBJbmZvID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnc2NlbmUnLCAncXVlcnktbm9kZS1jb21wb25lbnQnLCB7XHJcbiAgICAgICAgICAgICAgICB1dWlkOiBub2RlVXVpZCxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NjLlNwcml0ZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wb25lbnQgaW5mbzonLCBjb21wSW5mbyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyA3LiBSZW1vdmUgbm9kZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnXFxuNy4gUmVtb3ZpbmcgdGVzdCBub2RlLi4uJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3NjZW5lJywgJ3JlbW92ZS1ub2RlJywge1xyXG4gICAgICAgICAgICAgICAgdXVpZDogbm9kZVV1aWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb2RlIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdUZXN0IGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0QXNzZXRUb29scygpIHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG49PT0gVGVzdGluZyBBc3NldCBUb29scyA9PT0nKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyAxLiBRdWVyeSBhc3NldHNcclxuICAgICAgICBjb25zb2xlLmxvZygnMS4gUXVlcnlpbmcgaW1hZ2UgYXNzZXRzLi4uJyk7XHJcbiAgICAgICAgY29uc3QgYXNzZXRzID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXRzJywge1xyXG4gICAgICAgICAgICBwYXR0ZXJuOiAnKiovKi5wbmcnLFxyXG4gICAgICAgICAgICBjY1R5cGU6ICdjYy5JbWFnZUFzc2V0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBhc3NldHM6JywgYXNzZXRzPy5sZW5ndGggfHwgMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMi4gR2V0IGFzc2V0IGluZm9cclxuICAgICAgICBjb25zb2xlLmxvZygnXFxuMi4gR2V0dGluZyBhc3NldCBkYXRhYmFzZSBpbmZvLi4uJyk7XHJcbiAgICAgICAgY29uc3QgYXNzZXRJbmZvID0gYXdhaXQgRWRpdG9yLk1lc3NhZ2UucmVxdWVzdCgnYXNzZXQtZGInLCAncXVlcnktYXNzZXQtaW5mbycsIHtcclxuICAgICAgICAgICAgdXVpZDogJ2RiOi8vYXNzZXRzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBc3NldCBpbmZvOicsIGFzc2V0SW5mbyk7XHJcbiAgICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RQcm9qZWN0VG9vbHMoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnXFxuPT09IFRlc3RpbmcgUHJvamVjdCBUb29scyA9PT0nKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyAxLiBHZXQgcHJvamVjdCBpbmZvXHJcbiAgICAgICAgY29uc29sZS5sb2coJzEuIEdldHRpbmcgcHJvamVjdCBpbmZvLi4uJyk7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdEluZm8gPSBhd2FpdCBFZGl0b3IuTWVzc2FnZS5yZXF1ZXN0KCdwcm9qZWN0JywgJ3F1ZXJ5LWluZm8nKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnUHJvamVjdCBpbmZvOicsIHByb2plY3RJbmZvKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyAyLiBDaGVjayBidWlsZCBjYXBhYmlsaXR5XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1xcbjIuIENoZWNraW5nIGJ1aWxkIGNhcGFiaWxpdHkuLi4nKTtcclxuICAgICAgICBjb25zdCBjYW5CdWlsZCA9IGF3YWl0IEVkaXRvci5NZXNzYWdlLnJlcXVlc3QoJ3Byb2plY3QnLCAnY2FuLWJ1aWxkJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NhbiBidWlsZDonLCBjYW5CdWlsZCk7XHJcbiAgICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZmFpbGVkOicsIGVycm9yKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkFsbFRlc3RzKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIE1DUCBTZXJ2ZXIgVG9vbHMgVGVzdC4uLlxcbicpO1xyXG4gICAgXHJcbiAgICBhd2FpdCB0ZXN0U2NlbmVUb29scygpO1xyXG4gICAgYXdhaXQgdGVzdEFzc2V0VG9vbHMoKTtcclxuICAgIGF3YWl0IHRlc3RQcm9qZWN0VG9vbHMoKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1xcbj09PSBBbGwgdGVzdHMgY29tcGxldGVkID09PScpO1xyXG59XHJcblxyXG4vLyBFeHBvcnQgdG8gZ2xvYmFsIHNjb3BlIGZvciBlYXN5IGNvbnNvbGUgYWNjZXNzXHJcbihnbG9iYWwgYXMgYW55KS5NQ1BUZXN0ID0ge1xyXG4gICAgdGVzdFNjZW5lVG9vbHMsXHJcbiAgICB0ZXN0QXNzZXRUb29scyxcclxuICAgIHRlc3RQcm9qZWN0VG9vbHMsXHJcbiAgICBydW5BbGxUZXN0c1xyXG59OyJdfQ==